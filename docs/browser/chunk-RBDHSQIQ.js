import{e as D,f as z,g as G,h as H,i as J,j as K,k as Q,l as X,m as Y}from"./chunk-JJHXTD4G.js";import{Ab as R,Bb as b,Cb as y,Db as x,E,Fb as O,Ga as m,Hb as C,Ra as N,V as F,Xa as p,Z as V,ab as u,cc as j,da as k,db as v,ec as B,ga as I,gc as q,hb as l,ib as a,jb as P,kb as L,n as M,nb as A,oa as h,pa as S,pb as _,qa as W,xb as g,yb as c,zb as T}from"./chunk-SJF6I2OU.js";var Z=(()=>{let t=class t extends Y{constructor(){super(...arguments),this.source="users",this.userListSignal=N([])}get users$(){return this.userListSignal}getAllSignal(){this.findAll().subscribe({next:r=>{r.reverse(),this.userListSignal.set(r)},error:r=>{console.error("Error fetching users",r)}})}saveUserSignal(r){return this.add(r).pipe(F(i=>{this.userListSignal.update(n=>[i,...n])}),E(i=>(console.error("Error saving user",i),M(i))))}updateUserSignal(r){return this.edit(r.id,r).pipe(F(i=>{let n=this.userListSignal().map(d=>d.id===r.id?i:d);this.userListSignal.set(n)}),E(i=>(console.error("Error saving user",i),M(i))))}deleteUserSignal(r){return this.del(r.id).pipe(F(i=>{let n=this.userListSignal().filter(d=>d.id!==r.id);this.userListSignal.set(n)}),E(i=>(console.error("Error saving user",i),M(i))))}};t.\u0275fac=(()=>{let r;return function(n){return(r||(r=W(t)))(n||t)}})(),t.\u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var w=function(e){return e.success="SUCCESS",e.error="ERROR",e.default="",e}(w||{}),ee=function(e){return e.admin="ROLE_ADMIN",e.user="ROLE_USER",e.superAdmin="ROLE_SUPER_ADMIN",e}(ee||{});var U=(e,t)=>({"is-invalid":e,"is-valid":t}),te=(e,t)=>({"fa-plus":e,"fa-pencil":t}),ie=(e,t)=>({"text-danger":e,"text-success":t});function ne(e,t){e&1&&(l(0,"div",11),c(1," Please add a valid email "),a())}function re(e,t){if(e&1&&p(0,ne,2,0,"div",26),e&2){_();let o=g(9);u("ngIf",o.invalid)}}function ae(e,t){e&1&&(l(0,"div",11),c(1," Please add a valid name "),a())}function oe(e,t){if(e&1&&p(0,ae,2,0,"div",26),e&2){_();let o=g(17);u("ngIf",o.invalid)}}function se(e,t){e&1&&(l(0,"div",11),c(1," Please add a valid lastname "),a())}function le(e,t){if(e&1&&p(0,se,2,0,"div",26),e&2){_();let o=g(23);u("ngIf",o.invalid)}}function de(e,t){e&1&&(l(0,"div",11),c(1," Please add a valid password "),a())}function me(e,t){if(e&1&&p(0,de,2,0,"div",26),e&2){_();let o=g(4);u("ngIf",o.invalid)}}function ce(e,t){if(e&1){let o=L();l(0,"div",19)(1,"label",27),c(2," Password "),a(),l(3,"input",28,4),x("ngModelChange",function(i){h(o);let n=_();return y(n.user.password,i)||(n.user.password=i),S(i)}),a(),p(5,me,1,1,"div",11),a()}if(e&2){let o=g(4),r=_();m(3),b("ngModel",r.user.password),u("ngClass",C(3,U,o.invalid&&o.touched,o.valid&&o.touched)),m(2),v(5,o.invalid?5:-1)}}function pe(e,t){if(e&1&&(l(0,"p",25),c(1),a()),e&2){let o=_();u("ngClass",C(2,ie,o.feedbackMessage.type=="ERROR",o.feedbackMessage.type=="SUCCESS")),m(),T(o.feedbackMessage.message)}}var Ue=(()=>{let t=class t{constructor(){this.user={email:"",lastname:"",password:"",name:""},this.action="add",this.service=k(Z),this.feedbackMessage={type:w.default,message:""}}handleAction(r){if(r.invalid){Object.keys(r.controls).forEach(i=>{r.controls[i].markAsTouched()});return}else this.service[this.action=="add"?"saveUserSignal":"updateUserSignal"](this.user).subscribe({next:()=>{this.feedbackMessage.type=w.success,this.feedbackMessage.message=`User successfully ${this.action=="add"?"added":"updated"}`},error:i=>{this.feedbackMessage.type=w.error,this.feedbackMessage.message=i.message}})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=I({type:t,selectors:[["app-user-form"]],inputs:{title:"title",user:"user",action:"action"},standalone:!0,features:[O],decls:33,vars:26,consts:[["frm","ngForm"],["email","ngModel"],["name","ngModel"],["lastname","ngModel"],["password","ngModel"],["autocomplete","off",1,"add-user-container",3,"ngSubmit"],[1,"mb-5","px-5"],[1,"border-bottom","pb-3","mb-3"],[1,"px-5"],["for","email",1,"form-label","mb-2"],["type","text","id","email","name","email","placeholder","user@gmail.com","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"invalid-feedback"],[1,"border-bottom","pb-3","mb-3","px-5"],[1,"row"],[1,"col-6"],["for","name",1,"form-label","mb-2"],["type","text","id","name","name","name","placeholder","Carlos","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","lastname",1,"form-label","mb-2"],["type","text","id","lastname","name","lastname","placeholder","Hern\xE1ndez","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"col-6","pt-3"],[1,"pb-3","mb-3","d-flex","justify-content-center","align-items-center"],["type","submit",1,"btn","btn-primary","d-flex","align-items-center"],[1,"fa-solid","white","me-2",3,"ngClass"],[1,"mb-0"],[1,"d-flex","justify-content-center","align-items-center"],[1,"pb-0",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label","mb-2"],["type","password","id","password","name","password","placeholder","*****","required","",1,"form-control",3,"ngModelChange","ngModel","ngClass"]],template:function(i,n){if(i&1){let d=L();l(0,"form",5,0),A("ngSubmit",function(){h(d);let s=g(1);return S(n.handleAction(s))}),l(2,"h3",6),c(3),a(),l(4,"div",7)(5,"div",8)(6,"label",9),c(7," Email Address "),a(),l(8,"input",10,1),x("ngModelChange",function(s){return h(d),y(n.user.email,s)||(n.user.email=s),S(s)}),a(),p(10,re,1,1,"div",11),a()(),l(11,"div",12)(12,"div",13)(13,"div",14)(14,"label",15),c(15," Name "),a(),l(16,"input",16,2),x("ngModelChange",function(s){return h(d),y(n.user.name,s)||(n.user.name=s),S(s)}),a(),p(18,oe,1,1,"div",11),a(),l(19,"div",14)(20,"label",17),c(21," Lastname "),a(),l(22,"input",18,3),x("ngModelChange",function(s){return h(d),y(n.user.lastname,s)||(n.user.lastname=s),S(s)}),a(),p(24,le,1,1,"div",11),a(),p(25,ce,6,6,"div",19),a()(),l(26,"div",20)(27,"button",21),P(28,"i",22),l(29,"p",23),c(30),a()()(),l(31,"div",24),p(32,pe,2,5,"p",25),a()()}if(i&2){let d=g(9),f=g(17),s=g(23);m(3),T(n.title),m(5),b("ngModel",n.user.email),u("ngClass",C(14,U,d.invalid&&d.touched,d.valid&&d.touched)),m(2),v(10,d.invalid?10:-1),m(6),b("ngModel",n.user.name),u("ngClass",C(17,U,f.invalid&&f.touched,f.valid&&f.touched)),m(2),v(18,f.invalid?18:-1),m(4),b("ngModel",n.user.lastname),u("ngClass",C(20,U,s.invalid&&s.touched,s.valid&&s.touched)),m(2),v(24,s.invalid?24:-1),m(),v(25,n.action=="add"?25:-1),m(3),u("ngClass",C(23,te,n.action=="add",n.action=="edit")),m(2),R(" ",n.title," "),m(2),v(32,n.feedbackMessage.message?32:-1)}},dependencies:[q,j,B,X,K,D,z,G,Q,J,H],styles:[".add-user-container[_ngcontent-%COMP%]{padding:30px 0}"]});let e=t;return e})();export{ee as a,Z as b,Ue as c};
